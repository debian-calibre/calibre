From: Kovid Goyal <kovid@kovidgoyal.net>
Date: Mon, 8 Dec 2025 09:12:59 +0530
Subject: Fix a regression in the previous release that broke calibredb
 catalog with non-EPUB catalog output formats. (Closes: #1122108)

Forwarded: https://github.com/kovidgoyal/calibre/pull/2919

Fixes #2134344 [Missing --fields parameter?](https://bugs.launchpad.net/calibre/+bug/2134344)
Fixes #2919 (Revert "Fix addition of format specific options when using calibredb catalog with command line flags")
---
 src/calibre/db/cli/cmd_catalog.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/calibre/db/cli/cmd_catalog.py b/src/calibre/db/cli/cmd_catalog.py
index a1a0ee7..0f01c23 100644
--- a/src/calibre/db/cli/cmd_catalog.py
+++ b/src/calibre/db/cli/cmd_catalog.py
@@ -87,8 +87,8 @@ see the different options, specify the name of the output file and then the
         help=_('Show detailed output information. Useful for debugging')
     )
     fmt = 'epub'
-    if args and '.' in args[-1]:
-        fmt = args[-1].rpartition('.')[-1].lower()
+    if args and '.' in args[0]:
+        fmt = args[0].rpartition('.')[-1].lower()
         if fmt not in available_catalog_formats():
             fmt = 'epub'
 
