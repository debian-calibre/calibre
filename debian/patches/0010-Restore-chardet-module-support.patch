From: YOKOTA Hiroshi <yokota.hgml@gmail.com>
Date: Fri, 26 Feb 2021 21:33:16 +0900
Subject: Restore "chardet" module support

Forwarded: not-needed

Current Debian doesn't have "cchardet" module.
---
 src/calibre/test_build.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/calibre/test_build.py b/src/calibre/test_build.py
index 238b2d3..7c706b6 100644
--- a/src/calibre/test_build.py
+++ b/src/calibre/test_build.py
@@ -70,7 +70,10 @@ class BuildTest(unittest.TestCase):
         del CHMFile, chmlib
 
     def test_chardet(self):
-        from cchardet import detect
+        try:
+            from cchardet import detect
+        except ImportError:
+            from  chardet import detect
         raw = 'mūsi Füße'.encode('utf-8')
         data = detect(raw)
         self.assertEqual(data['encoding'].lower(), 'utf-8')
