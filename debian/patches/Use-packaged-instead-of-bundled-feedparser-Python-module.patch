From: Martin Pitt <mpitt@debian.org>
Date: Mon, 14 Nov 2016 22:41:23 +0100
Subject: Use packaged instead of bundled feedparser Python module

---
 recipes/lenta_ru.recipe           |    2 +-
 src/calibre/web/feeds/__init__.py |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

Index: b/recipes/lenta_ru.recipe
===================================================================
--- a/recipes/lenta_ru.recipe
+++ b/recipes/lenta_ru.recipe
@@ -63,7 +63,7 @@ class LentaRURecipe(BasicNewsRecipe):
 
     def parse_index(self):
         try:
-            feedData = parse(self.feeds[0])
+            feedData = parse(self.feeds[0], agent='Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.11) Gecko/20101012 Firefox/3.6.11')
             if not feedData:
                 raise NotImplementedError
             self.log("parse_index: Feed loaded successfully.")
Index: b/src/calibre/web/feeds/__init__.py
===================================================================
--- a/src/calibre/web/feeds/__init__.py
+++ b/src/calibre/web/feeds/__init__.py
@@ -333,7 +333,7 @@ def feed_from_xml(raw_xml, title=None, o
     # Handle unclosed escaped entities. They trip up feedparser and HBR for one
     # generates them
     raw_xml = re.sub(br'(&amp;#\d+)([^0-9;])', br'\1;\2', raw_xml)
-    feed = parse(raw_xml)
+    feed = parse(raw_xml, agent='Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2.11) Gecko/20101012 Firefox/3.6.11')
     pfeed = Feed(get_article_url=get_article_url, log=log)
     pfeed.populate_from_feed(feed, title=title,
                             oldest_article=oldest_article,
