From 2f199173b53f42e968f6abb383943da91aedbbeb Mon Sep 17 00:00:00 2001
From: Kovid Goyal <kovid@kovidgoyal.net>
Date: Mon, 27 Jul 2020 20:00:36 +0530
Subject: [PATCH 268/423] Clicking selection bar buttons should not steal focus
 from iframe

---
 src/pyj/read_book/selection_bar.pyj | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/pyj/read_book/selection_bar.pyj b/src/pyj/read_book/selection_bar.pyj
index 214880af72..5c2ddc7d7a 100644
--- a/src/pyj/read_book/selection_bar.pyj
+++ b/src/pyj/read_book/selection_bar.pyj
@@ -38,7 +38,10 @@ class SelectionBar:
 
         def cb(icon, tooltip, callback):
             ans = svgicon(icon, '3ex', '3ex', tooltip)
-            ans.addEventListener('click', callback)
+            ans.addEventListener('click', def(ev):
+                callback(ev)
+                self.view.focus_iframe()
+            )
             ans.classList.add('simple-link')
             ans.style.marginLeft = ans.style.marginRight = '0.5rem'
             return ans
-- 
2.28.0

