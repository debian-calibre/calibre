From 4091e675c0625b7809848e59650f8add40820062 Mon Sep 17 00:00:00 2001
From: Kovid Goyal <kovid@kovidgoyal.net>
Date: Tue, 14 Jul 2020 09:16:25 +0530
Subject: [PATCH 129/423] Remove wrap/unwrap for bytes in plistlib not needed
 on py3

---
 src/calibre/utils/config.py | 11 ++---------
 src/polyglot/plistlib.py    |  6 ------
 2 files changed, 2 insertions(+), 15 deletions(-)

diff --git a/src/calibre/utils/config.py b/src/calibre/utils/config.py
index 5be19df88a..924c1db9ac 100644
--- a/src/calibre/utils/config.py
+++ b/src/calibre/utils/config.py
@@ -363,25 +363,18 @@ class XMLConfig(dict):
         self.update(d)
 
     def __getitem__(self, key):
-        from polyglot.plistlib import unwrap_bytes
         try:
-            ans = dict.__getitem__(self, key)
-            return unwrap_bytes(ans)
+            return dict.__getitem__(self, key)
         except KeyError:
             return self.defaults.get(key, None)
 
     def get(self, key, default=None):
-        from polyglot.plistlib import unwrap_bytes
         try:
-            ans = dict.__getitem__(self, key)
-            return unwrap_bytes(ans)
+            return dict.__getitem__(self, key)
         except KeyError:
             return self.defaults.get(key, default)
 
     def __setitem__(self, key, val):
-        from polyglot.plistlib import wrap_bytes
-        if isinstance(val, bytes):
-            val = wrap_bytes(val)
         dict.__setitem__(self, key, val)
         self.commit()
 
diff --git a/src/polyglot/plistlib.py b/src/polyglot/plistlib.py
index e31b23f05f..e1a5b8b16a 100644
--- a/src/polyglot/plistlib.py
+++ b/src/polyglot/plistlib.py
@@ -2,11 +2,5 @@
 # vim:fileencoding=utf-8
 # License: GPL v3 Copyright: 2019, Kovid Goyal <kovid at kovidgoyal.net>
 
-def unwrap_bytes(x):
-    return x
-
-def wrap_bytes(x):
-    return x
-
 from plistlib import loads, dumps, Data  # noqa
 loads_binary_or_xml = loads
-- 
2.28.0

