From 6ab98b48a6fff9dc4d70c4731218a0daecdcc45a Mon Sep 17 00:00:00 2001
From: Kovid Goyal <kovid@kovidgoyal.net>
Date: Tue, 28 Jul 2020 09:50:19 +0530
Subject: [PATCH 270/423] Clicking outside middle should act like clicking the
 finish button not the adjust selection button

---
 src/pyj/read_book/create_annotation.pyj | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/pyj/read_book/create_annotation.pyj b/src/pyj/read_book/create_annotation.pyj
index 2fa17adf73..fbc7bd0aa9 100644
--- a/src/pyj/read_book/create_annotation.pyj
+++ b/src/pyj/read_book/create_annotation.pyj
@@ -540,7 +540,10 @@ class CreateAnnotation:  # {{{
 
     def container_clicked(self, ev):
         ev.stopPropagation(), ev.preventDefault()
-        self.hide_middle()
+        if self.middle.style.display is not 'none':
+            self.hide_middle()
+            self.accept()
+            return
         if self.state is WAITING_FOR_CLICK:
             pt = map_to_iframe_coords({'x': ev.clientX, 'y': ev.clientY})
             self.send_message('position-handles-at-point', x=pt.x, y=pt.y)
-- 
2.28.0

