From 07129a5d4fe27364c7deb47adbc84e78ec4dd338 Mon Sep 17 00:00:00 2001
From: Kovid Goyal <kovid@kovidgoyal.net>
Date: Mon, 25 Nov 2019 13:58:55 +0530
Subject: [PATCH 018/104] Dont remove v3 port from PyQt

---
 bypy/macos/__main__.py   | 1 -
 bypy/windows/__main__.py | 5 +----
 2 files changed, 1 insertion(+), 5 deletions(-)

diff --git a/bypy/macos/__main__.py b/bypy/macos/__main__.py
index 6af9214d74..3d36716880 100644
--- a/bypy/macos/__main__.py
+++ b/bypy/macos/__main__.py
@@ -541,7 +541,6 @@ class Freeze(object):
         for x in os.listdir(join(sp, 'PyQt5')):
             if x.endswith('.so') and x.rpartition('.')[0] not in PYQT_MODULES and x != 'sip.so':
                 os.remove(join(sp, 'PyQt5', x))
-        os.remove(join(sp, 'PyQt5', 'uic/port_v3/proxy_base.py'))
         self.remove_bytecode(sp)
 
     @flush
diff --git a/bypy/windows/__main__.py b/bypy/windows/__main__.py
index 8e61021465..53ae785381 100644
--- a/bypy/windows/__main__.py
+++ b/bypy/windows/__main__.py
@@ -201,9 +201,6 @@ def freeze(env, ext_dir):
     shutil.copytree(j(comext, 'shell'), j(sp_dir, 'win32com', 'shell'))
     shutil.rmtree(comext)
 
-    for pat in ('PyQt5\\uic\\port_v3', ):
-        x = glob.glob(j(env.lib_dir, 'site-packages', pat))[0]
-        shutil.rmtree(x)
     pyqt = j(env.lib_dir, 'site-packages', 'PyQt5')
     for x in {x for x in os.listdir(pyqt) if x.endswith('.pyd')}:
         if x.partition('.')[0] not in PYQT_MODULES and x != 'sip.pyd':
@@ -453,7 +450,7 @@ def sign_files(env, files):
                 subprocess.check_call(cmd + [timeserver] + list(files))
                 break
             except subprocess.CalledProcessError:
-                print ('Signing failed, retrying with different timestamp server')
+                print('Signing failed, retrying with different timestamp server')
         else:
             raise SystemExit('Signing failed')
 
-- 
2.25.0

