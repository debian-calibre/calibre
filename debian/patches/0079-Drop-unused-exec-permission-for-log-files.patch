From: YOKOTA Hiroshi <yokota.hgml@gmail.com>
Date: Fri, 8 Aug 2025 20:40:41 +0900
Subject: Drop unused exec permission for log files

Forwarded: https://github.com/kovidgoyal/calibre/pull/2853

Default mode is 0o777.
Use mode 0o666 for text log files.
---
 src/calibre/srv/utils.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/calibre/srv/utils.py b/src/calibre/srv/utils.py
index 83e1577..18ea704 100644
--- a/src/calibre/srv/utils.py
+++ b/src/calibre/srv/utils.py
@@ -285,7 +285,7 @@ class RotatingStream:
             self.stream = share_open(self.filename, 'a', newline='')
         else:
             # see https://bugs.python.org/issue27805
-            self.stream = open(os.open(self.filename, os.O_WRONLY|os.O_APPEND|os.O_CREAT|os.O_CLOEXEC), 'w')
+            self.stream = open(os.open(self.filename, os.O_WRONLY|os.O_APPEND|os.O_CREAT|os.O_CLOEXEC, mode=0o666), 'w')
         try:
             self.stream.tell()
         except OSError:
